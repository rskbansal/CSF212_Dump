# Answers to Lab 1
## Q1
```bash
$ mysql -u csf212 -p db212 < import_data.sql
```

## Q2
```sql
ALTER TABLE Artists
  ADD CONSTRAINT UNIQUE(Name);

ALTER TABLE Albums
  ADD CONSTRAINT FOREIGN KEY(ArtistName) REFERENCES Artists(Name)
    ON DELETE CASCADE 
    ON UPDATE CASCADE;
```

## Q3
```sql
ALTER TABLE Albums
  ADD CONSTRAINT UNIQUE(AlbumName);

CREATE TABLE Songs (
  Likes INT,
  SongID INT PRIMARY KEY,
  SongName VARCHAR(255) NOT NULL,
  AlbumName VARCHAR(255),
  FOREIGN KEY(AlbumName) REFERENCES Albums(AlbumName)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  ArtistName VARCHAR(255),
  FOREIGN KEY(ArtistName) REFERENCES Artists(Name)
    ON DELETE CASCADE 
    ON UPDATE CASCADE,
  Duration DECIMAL(3, 2)
  ); 
```

## Q4
```sql
INSERT INTO Songs
VALUES 
(243234, 1, 'Daylight', 'Overexposed', 'Maroon 5', 3.45),
(323249, 2, 'Payphone', 'Overexposed', 'Maroon 5', 3.51),
(98271, 10, 'Gustaakh', 'Vaaqif', 'TLT', 3.04),
(378923, 15, 'The Catalyst', 'A Thousand Suns', 'Linkin Park', 5.39);
```

## Q5
```sql
UPDATE Artists
SET Name = "Weeknd"
WHERE Name = "TLT";
```

## Q6
```sql
SELECT *
FROM Songs
WHERE SongName LIKE '%e_' AND Duration > 4;
```

## Q7
```sql
SELECT *
FROM Songs
ORDER BY Duration ASC, Likes DESC;
```

## Q8
```sql
SELECT CONCAT(AlbumName, ' ', ArtistName) AS Music
FROM Albums
WHERE YEAR(ReleaseDate) = 2016;
```
(OR) 
```sql
```

## Q9
```sql
SELECT SongName
FROM Songs
WHERE Duration < 4
ORDER BY Likes DESC
LIMIT 1;
```

## Q10
```sql
SELECT *
FROM Users
WHERE EmailID LIKE '%@hotmail.com' AND Account_Type = 'P';
```

## Q11
The constraint names are auto-generated by MySQL. To see the names of the constraints :
```sql
SHOW CREATE TABLE Songs\G; 

# Output

*************************** 1. row ***************************
       Table: Songs
Create Table: CREATE TABLE `songs` (
  `Likes` int DEFAULT NULL,
  `SongID` int NOT NULL,
  `SongName` varchar(255) NOT NULL,
  `AlbumName` varchar(255) DEFAULT NULL,
  `ArtistName` varchar(255) DEFAULT NULL,
  `Duration` decimal(3,2) DEFAULT NULL,
  PRIMARY KEY (`SongID`),
  KEY `AlbumName` (`AlbumName`),
  KEY `ArtistName` (`ArtistName`),
  CONSTRAINT `songs_ibfk_1` FOREIGN KEY (`AlbumName`) REFERENCES `albums` (`AlbumName`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `songs_ibfk_2` FOREIGN KEY (`ArtistName`) REFERENCES `artists` (`Name`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
1 row in set (0.00 sec)
```

The constraint names are `Songs_ibfk_1` & `Songs_ibfk_2`

```sql
ALTER TABLE Songs
  DROP FOREIGN KEY Songs_ibfk_1,
  DROP FOREIGN KEY Songs_ibfk_2;

ALTER TABLE Songs
  ADD CONSTRAINT FOREIGN KEY(ArtistName) REFERENCES Artists(Name) 
    ON DELETE RESTRICT 
    ON UPDATE CASCADE,
  ADD CONSTRAINT FOREIGN KEY(AlbumName) REFERENCES Albums(AlbumName)
    ON DELETE SET NULL
    ON UPDATE CASCADE;
```

## Q12
```sql
DELETE
FROM Artists
WHERE Name = 'The Local Train';

# Output

Query OK, 0 rows affected (0.00 sec)
```
There is no such entry, so no rows are affected